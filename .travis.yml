language: python
python:
  - "2.7"
# command to install dependencies
install:
  - "pip install -r app/requirements.txt"
# command to run tests
script: nosetests
before_deploy: cd ..

sudo: false

deploy:
  # Deploy master branch to production environment  on merge (or push)
  - provider: elasticbeanstalk
    access_key_id: AKIAJYCV23ZHCMABN6SQ
    secret_access_key:
      secure: "avqot15G6YM6pNEJD8QqXsSwClgEYKmvQEwt8Z45oerQ4MGNDHe40G9jkJlayGXUzvkgZNnBY/tcpGVdfWx9RShxgBe+XU4ikaCRGfWgmeqyNWniQKN0OutFSR+1jrTRterr+2v0XWO4c10XNphIkWW/zd46D+cpyaEPhKsNBPrEBvqZeB9R5yXpFnY16DyRCHKRE1Gep3P6CrhTjxmSQ2rOKrrMKBLVNrkghJkd641RWsy2Ijk8fYdH081jUpUCG5dj/B7wlFdT5u84kppYAaxJP/Vt/yuuwKpbOAvqGApRtaUR2VviW+1gjyhUUV0uzX+U+yeKbXIVmOHuQl1arYW1hvSoQNFjFDPanAmmlbQYYvmjZw8x7VMnqv2vOGd3k8I95hkVLQrAK2E4XERLzujiGOa+qF7O2fWlur3lkV6IfC9Ako2zqle2mE0DeU0eX7+8mElwiWKRQ0SziW6oInCZxJodI/mOdfPZ4a4Z+jQx8xHndFWjq//utlcFOeiO2194Umgtdb9yDzZHih6YTwEQONvX7WsG3ZdvzlH6cGZC2oRHg56EHm+G35q/sXNJh2AlYwxjQGRL8IfzCnVY/rNyQ+7JV/uvaeX2do0ziAQiXkvB/rW96Cjd/OE224CcyL5XbRj3sl4tI/2tbgoFepmF4yc4mPXcHg1Of4vN5QE="
    region: us-east-1
    app: flask-app-template
    env: FlaskAppTemplateProd
    bucket_name: flask-app-template-deploy
    bucket_path: production
    skip_cleanup: true
    on:
      repo: thehackerati/flask-app-template
      branch: master

  # Key for public repo
  # Deploy staging branch to staging environment  on merge (or push)
  - provider: elasticbeanstalk
    access_key_id: AKIAJYCV23ZHCMABN6SQ
    secret_access_key:
      secure: "avqot15G6YM6pNEJD8QqXsSwClgEYKmvQEwt8Z45oerQ4MGNDHe40G9jkJlayGXUzvkgZNnBY/tcpGVdfWx9RShxgBe+XU4ikaCRGfWgmeqyNWniQKN0OutFSR+1jrTRterr+2v0XWO4c10XNphIkWW/zd46D+cpyaEPhKsNBPrEBvqZeB9R5yXpFnY16DyRCHKRE1Gep3P6CrhTjxmSQ2rOKrrMKBLVNrkghJkd641RWsy2Ijk8fYdH081jUpUCG5dj/B7wlFdT5u84kppYAaxJP/Vt/yuuwKpbOAvqGApRtaUR2VviW+1gjyhUUV0uzX+U+yeKbXIVmOHuQl1arYW1hvSoQNFjFDPanAmmlbQYYvmjZw8x7VMnqv2vOGd3k8I95hkVLQrAK2E4XERLzujiGOa+qF7O2fWlur3lkV6IfC9Ako2zqle2mE0DeU0eX7+8mElwiWKRQ0SziW6oInCZxJodI/mOdfPZ4a4Z+jQx8xHndFWjq//utlcFOeiO2194Umgtdb9yDzZHih6YTwEQONvX7WsG3ZdvzlH6cGZC2oRHg56EHm+G35q/sXNJh2AlYwxjQGRL8IfzCnVY/rNyQ+7JV/uvaeX2do0ziAQiXkvB/rW96Cjd/OE224CcyL5XbRj3sl4tI/2tbgoFepmF4yc4mPXcHg1Of4vN5QE="
    region: us-east-1
    app: flask-app-template
    env: FlaskAppTemplateStaging
    bucket_name: flask-app-template-deploy
    bucket_path: staging
    skip_cleanup: true
    on:
      repo: thehackerati/flask-app-template
      branch: staging


