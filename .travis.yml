language: python
python:
  - "2.7"
# command to install dependencies
install:
  - "pip install -r app/requirements.txt"
# command to run tests
script: nosetests
before_deploy: cd ..

sudo: false

deploy:
  # Deploy master branch to production environment  on merge (or push)
  - provider: elasticbeanstalk
    access_key_id: AKIAJYCV23ZHCMABN6SQ
    secret_access_key:
      secure: "MEMFH1UvXtS2REiVhgU+GmkzrLSVJzr/BwngoBh990FTkjAvhM0IhNUI9uZKlQrq1B84HA3zjMscoqvznyQkk5X9pTT2RbACkxB6hbfRJN8zjZYQQX/d58hyvy5dkBhnpM++iHrNat66ANMvlcPc0ioD+cbFQBFDCcdBT2QrAKVxS9JLgZ/Eo/+sCg06ki29yNbTuaNYEj2fbRkg9qUfeZAYV3N/oj30Bvq8pu5JrLrFGuK/pErM9kD/+rr74dxJtzxpqAhPUrqXHaVkT2bpJ3I1rtssj69owbCK1sunVaoghEZmOH+ii6P8pCtR3Fa6IR9zU3g++7tQzJgIBoSmMwbM5loO3M0zzzXjxXy3LoHBEIWe6xfh4u7halbw5rZiNcUStrjjuELjTbvd9jAiaLjOfZ/1xlsIMUxO6T/nMHOg4VkOWa402CBE/rJq2kJpIM140cD+n5bXBDqP6zc8PtrUuFGy3mh4DM4U8vcDPcC6rKPxxyOP5LOGthNIFSRXjp2mUxjYebzKrNTLM3HrcImR2/tbUVKOFY0ufiK5fC2XVxUTuBdN6LlwtqawmUarLJUMvV4h6hAk7azl3qiIsxHlJGxTXF8RewI2QLL+HWeH51Ss+wqDvbkIMitQx6tMKjUfT2Fy70QR+H+McUBmr4IHmq4XxpC/Yg1LwcgD+gw="
    region: us-east-1
    app: flask-app-template
    env: FlaskAppTemplateProd
    bucket_name: flask-app-template-deploy
    bucket_path: production
    skip_cleanup: true
    on:
      repo: thehackerati/flask-app-template
      branch: master

  # Key for public repo
  # Deploy staging branch to staging environment  on merge (or push)
  - provider: elasticbeanstalk
    access_key_id: AKIAJYCV23ZHCMABN6SQ
    secret_access_key:
      secure: "MEMFH1UvXtS2REiVhgU+GmkzrLSVJzr/BwngoBh990FTkjAvhM0IhNUI9uZKlQrq1B84HA3zjMscoqvznyQkk5X9pTT2RbACkxB6hbfRJN8zjZYQQX/d58hyvy5dkBhnpM++iHrNat66ANMvlcPc0ioD+cbFQBFDCcdBT2QrAKVxS9JLgZ/Eo/+sCg06ki29yNbTuaNYEj2fbRkg9qUfeZAYV3N/oj30Bvq8pu5JrLrFGuK/pErM9kD/+rr74dxJtzxpqAhPUrqXHaVkT2bpJ3I1rtssj69owbCK1sunVaoghEZmOH+ii6P8pCtR3Fa6IR9zU3g++7tQzJgIBoSmMwbM5loO3M0zzzXjxXy3LoHBEIWe6xfh4u7halbw5rZiNcUStrjjuELjTbvd9jAiaLjOfZ/1xlsIMUxO6T/nMHOg4VkOWa402CBE/rJq2kJpIM140cD+n5bXBDqP6zc8PtrUuFGy3mh4DM4U8vcDPcC6rKPxxyOP5LOGthNIFSRXjp2mUxjYebzKrNTLM3HrcImR2/tbUVKOFY0ufiK5fC2XVxUTuBdN6LlwtqawmUarLJUMvV4h6hAk7azl3qiIsxHlJGxTXF8RewI2QLL+HWeH51Ss+wqDvbkIMitQx6tMKjUfT2Fy70QR+H+McUBmr4IHmq4XxpC/Yg1LwcgD+gw="
    region: us-east-1
    app: flask-app-template
    env: FlaskAppTemplateStaging
    bucket_name: flask-app-template-deploy
    bucket_path: staging
    skip_cleanup: true
    on:
      repo: thehackerati/flask-app-template
      branch: staging


