language: python
python:
  - "2.6"
  - "2.7"
  - "3.2"
  - "3.3"
  - "3.4"
  - "nightly"
# command to install dependencies
install:
  - "pip install"
  - "pip install -r app/requirements.txt"
# command to run tests
script: nosetests
before_deploy: cd ..

sudo: false

deploy:
  # Deploy master branch to production environment  on merge (or push)
  - provider: elasticbeanstalk
    access_key_id: AKIAJNTNA6QVLWNUQDCA
    secret_access_key:
      secure: "p+Qdr1ftam4EyX1VLm8uqmnliS5vwbios93KD7dfTaMcu+rwInV4PPxXUT7Z/GbBs/GJd8st2UxRl+5xebWmi4eQVOxK+q7rKaWeqKq91jb0oXDW00ETU7OLwE8P0fqU1WPcoZKxu873IifL5AxfOAcvBHG4NCBkS5EwQbMeNibVfztFh8bLAeYTGyk2QZ4E1A8vwggUxtI96rYdXSnMAzaJY+epuIUa8ZAyjrmGE0GfuZ/tIMQEltht3CXJvvoTFiPDRA0xQxrU0EzIdqHnHgSK8vHW7XPqLey2W4gP4HUMbfNTIlUmEmMV7LpVc22VUGO3HdFfY9neJrSM5NU5a3Rr9se51jeIyNCEmv0LSjNebFrxZsnIqGru4GzlpLkHBLq0NjElChilHAlwcenkvfo12Ke3pEeJ+zPFCIvNWWsIXEPoWOk1ueoog0RHDm85pXJKaL9C2GKvQl02iaYhK7FkQ0SRRKBtE8XnNwqsIBmW1MnAvC34mF7p63a166AUwl88PpoXcZ2txcWq9hafWDtYnBLsWhWdsmgyvcXnhWaYacpF1i11gx3ShRgTUbfD7mNOX8Ru18H0OAxi83RVuib4oVWGg1gz/MWPtJljMIZltLBfiEelycSpiX1CAd/gLTO56M59GKs9XoiVXl6EbVNxo3xzcKuY2153Vx8ml3E="
    region: us-east-1
    app: flask-app-template
    env: FlaskAppTemplateProd
    bucket_name: flask-app-template-deploy
    bucket_path: production
    skip_cleanup: true
    on:
      repo: thehackerati/flask-app-template
      branch: master

  # Deploy staging branch to staging environment  on merge (or push)
  - provider: elasticbeanstalk
    access_key_id: AKIAJNTNA6QVLWNUQDCA
    secret_access_key:
      secure: "p+Qdr1ftam4EyX1VLm8uqmnliS5vwbios93KD7dfTaMcu+rwInV4PPxXUT7Z/GbBs/GJd8st2UxRl+5xebWmi4eQVOxK+q7rKaWeqKq91jb0oXDW00ETU7OLwE8P0fqU1WPcoZKxu873IifL5AxfOAcvBHG4NCBkS5EwQbMeNibVfztFh8bLAeYTGyk2QZ4E1A8vwggUxtI96rYdXSnMAzaJY+epuIUa8ZAyjrmGE0GfuZ/tIMQEltht3CXJvvoTFiPDRA0xQxrU0EzIdqHnHgSK8vHW7XPqLey2W4gP4HUMbfNTIlUmEmMV7LpVc22VUGO3HdFfY9neJrSM5NU5a3Rr9se51jeIyNCEmv0LSjNebFrxZsnIqGru4GzlpLkHBLq0NjElChilHAlwcenkvfo12Ke3pEeJ+zPFCIvNWWsIXEPoWOk1ueoog0RHDm85pXJKaL9C2GKvQl02iaYhK7FkQ0SRRKBtE8XnNwqsIBmW1MnAvC34mF7p63a166AUwl88PpoXcZ2txcWq9hafWDtYnBLsWhWdsmgyvcXnhWaYacpF1i11gx3ShRgTUbfD7mNOX8Ru18H0OAxi83RVuib4oVWGg1gz/MWPtJljMIZltLBfiEelycSpiX1CAd/gLTO56M59GKs9XoiVXl6EbVNxo3xzcKuY2153Vx8ml3E="
    region: us-east-1
    app: flask-app-template
    env: FlaskAppTemplateStaging
    bucket_name: flask-app-template-deploy
    bucket_path: staging
    skip_cleanup: true
    on:
      repo: thehackerati/flask-app-template
      branch: staging


